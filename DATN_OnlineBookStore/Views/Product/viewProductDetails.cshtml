@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@model DATN_OnlineBookStore.Models.TblSanpham
@{
    Layout = null;
}
<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>eTrade || Home-06</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.png">
    <link rel="stylesheet" href="/assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/vendor/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/vendor/flaticon/flaticon.css">
    <link rel="stylesheet" href="/assets/css/vendor/slick.css">
    <link rel="stylesheet" href="/assets/css/vendor/slick-theme.css">
    <link rel="stylesheet" href="/assets/css/vendor/jquery-ui.min.css">
    <link rel="stylesheet" href="/assets/css/vendor/sal.css">
    <link rel="stylesheet" href="/assets/css/vendor/magnific-popup.css">
    <link rel="stylesheet" href="/assets/css/vendor/base.css">
    <link rel="stylesheet" href="/assets/css/style.min.css">
    <style>
        /* Container for quantity buttons and input */
        .product-variation {
            display: flex;
            align-items: center;
            gap: 5px; /* Adjusted gap for a more compact look */
        }

        /* Quantity input wrapper */
        .pro-qty {
            display: flex;
            align-items: center;
            border-radius: 4px;
        }

            /* Quantity input field */
            .pro-qty input {
                width: 40px; /* Narrower input field */
                height: 32px;
                text-align: center;
                border: none; /* Remove borders inside the wrapper */
                outline: none;
            }

        /* Quantity increment and decrement buttons */
        .qtybtn {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 32px;
            height: 32px;
            background-color: #f0f0f0; /* Light background for the buttons */
            border: 1px solid #ccc; /* Consistent border with the input */
            cursor: pointer;
            user-select: none; /* Prevent text selection */
        }

            .qtybtn:hover {
                background-color: #e0e0e0; /* Slightly darker on hover */
            }

            /* Ensure no extra space around the elements */
            .qtybtn:focus,
            .pro-qty input:focus {
                outline: none;
            }

    </style>
</head>
<body>
    <header class="header axil-header header-style-2">
        <div class="axil-header-top">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-2 col-sm-3 col-5">
                        <div class="header-brand">
                            <a href="index.html" class="logo logo-dark">
                                <img src="/assets/images/logo/logo.png" alt="Site Logo">
                            </a>
                            <a href="index.html" class="logo logo-light">
                                <img src="/assets/images/logo/logo-light.png" alt="Site Logo">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-10 col-sm-9 col-7">
                        <div class="header-top-dropdown dropdown-box-style">
                            <div class="container mt-3">
                                <form class="form-inline" method="get" action="@Url.Action("searchProducts", "Product")">
                                    <div class="input-group">
                                        <input type="search" class="form-control" id="searchQuery" name="query" placeholder="Bạn đang tìm kiếm..." aria-label="Search" maxlength="128" autocomplete="off">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="submit" style="height: 38px;">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="axil-mainmenu aside-category-menu">
            <div class="container">
                <div class="header-navbar">
                    <div class="header-nav-department">
                        <aside class="header-department">
                            <button class="header-department-text department-title">
                                <span class="icon"><i class="fal fa-bars"></i></span>
                                <span class="text">Thể loại</span>
                            </button>
                            <nav class="department-nav-menu">
                                <button class="sidebar-close"><i class="fas fa-times"></i></button>
                                <ul class="nav-menu-list">
                                </ul>
                            </nav>
                        </aside>
                    </div>
                    <div class="header-main-nav">
                        <nav class="mainmenu-nav">
                            <button class="mobile-close-btn mobile-nav-toggler"><i class="fas fa-times"></i></button>
                            <div class="mobile-nav-brand">
                                <a href="@Url.Action("updateInfo", "Product")" class="logo">
                                    <img src="/assets/images/logo/logo.png" alt="Site Logo">
                                </a>
                            </div>
                            <ul class="mainmenu">
                                <li class="menu-item-has-children menu-item-open">
                                    <a asp-area="" asp-controller="Product" asp-action="viewProduct">Home</a>
                                </li>
                                @* <li class="menu-item-has-children">
                                    <a href="#">Shop</a>
                                </li>
                                <li class="menu-item-has-children">
                                    <a href="#">Pages</a>
                                    <ul class="axil-submenu">
                                        <li><a href="wishlist.html">Wishlist</a></li>
                                        <li><a href="cart.html">Cart</a></li>
                                        <li><a href="checkout.html">Checkout</a></li>
                                        <li><a href="my-account.html">Account</a></li>
                                        <li><a href="sign-up.html">Sign Up</a></li>
                                        <li><a href="sign-in.html">Sign In</a></li>
                                        <li><a href="forgot-password.html">Forgot Password</a></li>
                                        <li><a href="reset-password.html">Reset Password</a></li>
                                    </ul>
                                </li> *@
                            </ul>
                        </nav>
                    </div>
                    <div class="header-action">
                        <ul class="action-list">
                            <!-- Search Icon -->
                            <li class="axil-search d-sm-none d-block">
                                <a href="javascript:void(0)" class="header-search-icon" title="Search">
                                    <i class="flaticon-magnifying-glass"></i>
                                </a>
                            </li>

                            <!-- Wishlist Link -->
                            <li class="wishlist">
                                <a href="wishlist.html">
                                    <i class="flaticon-heart"></i>
                                </a>
                            </li>

                            <!-- Shopping Cart Link -->
                            <li class="shopping-cart">
                                <a href="@Url.Action("ViewCart", "Cart")">
                                    <i class="flaticon-shopping-cart"></i>
                                </a>
                            </li>

                            <!-- My Account Dropdown -->
                            <li class="my-account">
                                @if (HttpContextAccessor.HttpContext != null && HttpContextAccessor.HttpContext.Session != null && HttpContextAccessor.HttpContext.Session.GetInt32("AccountId") != null)
                                {
                                    <a href="javascript:void(0)" class="account-trigger">
                                        <i class="flaticon-person"></i>
                                    </a>
                                    <div class="my-account-dropdown">
                                        <ul>
                                            <li><a href="@Url.Action("updateInfo", "Account")">Thông tin chung</a></li>
                                            <li><a href="@Url.Action("orderConfirmation", "Cart")">Thông tin đơn hàng</a></li>
                                            <li><a href="@Url.Action("ChangePassword", "Account")">Đổi mật khẩu</a></li>
                                            <li><a href="@Url.Action("Logout", "Account")">Đăng xuất</a></li>
                                        </ul>
                                    </div>
                                }
                                else
                                {
                                    <a href="@Url.Action("Login", "Account")" class="login-btn">Đăng nhập</a>
                                }
                            </li>

                            <!-- Mobile Navigation Toggle Button -->
                            <li class="axil-mobile-toggle">
                                <button class="menu-btn mobile-nav-toggler">
                                    <i class="flaticon-menu-2"></i>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div>
<main class="main-wrapper">
    <div class="axil-single-product-area bg-color-white">
        <div class="single-product-thumb axil-section-gapcommon single-product-modern">
            <div class="container">
                <div class="row row--20">
                    <div class="col-lg-6 mb--40">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="product-large-thumbnail-4 single-product-thumbnail axil-product">
                                    <div class="thumbnail">
                                        <img src="@Model.SHinhanh" alt="@Model.STensanpham">
                                    </div>                                   
                                </div>
                            </div>                           
                        </div>
                    </div>
                    <div class="col-lg-6 mb--40">
                        <div class="single-product-content">
                            <div class="inner">
                                <h2 class="product-title">@Model.STensanpham</h2>
                                <span class="price-amount">@Model.FGiaban</span>
                                <ul class="description">
                                    <li>Trọng lượng: @Model.FTrongluong</li>
                                    @if (ViewBag.BookDetails != null)
                                    {
                                        var book = ViewBag.BookDetails;
                                        <li>Tác giả: @book.STacgia</li>
                                        <li>Trọng lượng: @book.SNhaxuatban</li>
                                        <li>Năm xuất bản: @book.SNamxuatban</li>
                                        <li>Ngôn ngữ: @book.SNgonngu</li>
                                        <li>Số trang: @book.ISotrang</li>
                                        <li>ISBN: @book.Isbn</li>
                                    }
                                    @if (ViewBag.OfficeSupplyDetails != null)
                                    {
                                        var officeSupply = ViewBag.OfficeSupplyDetails;
                                        <li>Xuất xứ: @officeSupply.SXuatxu</li>
                                        <li>Thương hiệu: @officeSupply.SThuonghieu</li>
                                        <li>Màu sắc: @officeSupply.SMausac</li>
                                        <li>Chất liệu: @officeSupply.SChatlieu</li>
                                        <li>Kích thước: @officeSupply.SKichthuoc</li>
                                    }
                                    <li>Mô tả: @Model.SMota</li>
                                </ul>
                                <div class="product-variations-wrapper">

                                    <form method="post" action="@Url.Action("addToCart", "Cart")">
                                        <input type="hidden" name="productId" value="@Model.PkISanphamId" />
                                        <div class="product-variation quantity-variant-wrapper">
                                            <h6 class="title">Số lượng</h6>                                               
                                                <div class="pro-qty">
                                                    <span class="dec qtybtn">-</span>
                                                    <input name="quantity" type="text" value="1">
                                                    <span class="inc qtybtn">+</span>
                                                </div>                                                
                                        </div>
                                        <button type="submit" class="btn btn-primary">Thêm vào giỏ</button>
                                    </form>

                                </div>

                                <!-- End Product Action Wrapper  -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End .single-product-thumb -->
        <div class="woocommerce-tabs wc-tabs-wrapper bg-lighter wc-tab-style-two">
            <div class="container">
                <div class="section-title-wrapper section-title-border">
                    <h2 class="title">About This Product 💥</h2>
                </div>
                <div class="tabs-wrap">
                    <ul class="nav tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="active" id="description-tab" data-bs-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Specifications</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a id="reviews-tab" data-bs-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">Reviews</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                            <div class="reviews-wrapper">
                                <div class="row">
                                    <div class="col-lg-6 mb--40">
                                        <div class="axil-comment-area pro-desc-commnet-area">
                                            <h5 class="title">Review for this product</h5>
                                            <ul class="comment-list">
                                                <!-- Start Single Comment  -->
                                                <li class="comment">
                                                    <div class="comment-body">
                                                        <div class="single-comment">
                                 
                                                            <div class="comment-inner">
                                                                @if (ViewBag.Reviews != null && ViewBag.Reviews.Count > 0)
                                                                {
                                                                    foreach (var review in ViewBag.Reviews)
                                                                    {
                                                                        <div class="comment-img" style="width: 20%;">
                                                                            <img src="/assets/images/blog/author-image-4.png" alt="Author Images">
                                                                        </div>
                                                                        <h6 class="commenter">
                                                                            <a class="hover-flip-item-wrapper" href="#">
                                                                                <span class="hover-flip-item">
                                                                                    <span data-text="@review.UserName">
                                                                                        @review.UserName
                                                                                    </span>
                                                                                </span>
                                                                            </a>
                                                                            <span class="commenter-rating rating-four-star">
                                                                                @for (int i = 1; i <= 5; i++)
                                                                                {
                                                                                    if (i <= review.Rating)
                                                                                    {
                                                                                        <a href="#"><i class="fas fa-star"></i></a> <!-- Filled star -->
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <i class="fas fa-star empty-rating"></i> <!-- Empty star -->
                                                                                    }
                                                                                }
                                                                            </span>
                                                                        </h6>
                                                                        <div class="comment-text">
                                                                            <p>@review.Description</p>
                                                                        </div>
                                                                        <div class="comment-text">
                                                                            <p>Created at: @review.CreatedAt?.ToString("dd/MM/yyyy HH:mm")</p>
                                                                        </div>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <p>Chưa có đánh giá nào cho sản phẩm này.</p>
                                                                }
                                                                                                                            
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <!-- End Single Comment  -->
                                            </ul>
                                        </div>
                                        <!-- End .axil-commnet-area -->
                                    </div>
                                    <!-- End .col -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="single-product-features">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="single-features">
                                <div class="icon">
                                    <i class="far fa-hand-holding-box"></i>
                                </div>
                                <div class="content">
                                    <h6 class="title">Easy Return</h6>
                                    <p>Anytime you can return the product without any payment</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="single-features">
                                <div class="icon quality">
                                    <i class="fal fa-badge-check"></i>
                                </div>
                                <div class="content">
                                    <h6 class="title">Quality Service</h6>
                                    <p>We are dedicated to give you quality service for your happiness</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="single-features">
                                <div class="icon original">
                                    <i class="fal fa-box"></i>
                                </div>
                                <div class="content">
                                    <h6 class="title">Original Product</h6>
                                    <p>We deliver you each and every prodeuct is original </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- woocommerce-tabs -->

    </div>
    <!-- Start Expolre Product Area  --> 
    <!-- End Expolre Product Area  -->
    <div class="sale-banner-area">
        <div class="container">
            <div class="sale-banner-thumb">
                <a href="shop.html"><img src="assets/images/banner/sale_banner.png" alt="Sale Banner"></a>
            </div>
        </div>
    </div>
    <div class="service-area axil-section-gapcommon">
        <div class="container">
            <div class="section-title-wrapper section-title-border">
                <h2 class="title">Our Service 💥</h2>
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <div class="service-box service-style-3">
                        <div class="icon">
                            <i class="far fa-truck"></i>
                        </div>
                        <div class="content">
                            <h6 class="title">Fast &amp; Secure Delivery</h6>
                            <p>Tell about your service.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="service-box service-style-3">
                        <div class="icon">
                            <i class="fal fa-badge-check"></i>
                        </div>
                        <div class="content">
                            <h6 class="title">Money Back Guarantee</h6>
                            <p>Within 10 days.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="service-box service-style-3">
                        <div class="icon">
                            <i class="far fa-hand-holding-box"></i>
                        </div>
                        <div class="content">
                            <h6 class="title">24 Hour Return Policy</h6>
                            <p>No question ask.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="service-box service-style-3">
                        <div class="icon">
                            <i class="far fa-headset"></i>
                        </div>
                        <div class="content">
                            <h6 class="title">Pro Quality Support</h6>
                            <p>24/7 Live support.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</div>
        <div class="service-area">
            <div class="container">
                <div class="row row-cols-xl-4 row-cols-sm-2 row-cols-1 row--20">
                    <div class="col">
                        <div class="service-box service-style-2">
                            <div class="icon">
                                <img src="/assets/images/icons/service1.png" alt="Service">
                            </div>
                            <div class="content">
                                <h6 class="title">Giao hàng nhanh và an toàn</h6>
                                <p>Về dịch vụ của bạn.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="service-box service-style-2">
                            <div class="icon">
                                <img src="/assets/images/icons/service2.png" alt="Service">
                            </div>
                            <div class="content">
                                <h6 class="title">Bảo hành 1 đổi 1</h6>
                                <p>Về dịch vụ của bạn.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="service-box service-style-2">
                            <div class="icon">
                                <img src="/assets/images/icons/service3.png" alt="Service">
                            </div>
                            <div class="content">
                                <h6 class="title">Thanh toán an toàn</h6>
                                <p>Về dịch vụ của bạn.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="service-box service-style-2">
                            <div class="icon">
                                <img src="/assets/images/icons/service4.png" alt="Service">
                            </div>
                            <div class="content">
                                <h6 class="title">Hỗ trợ khách hàng 24/7</h6>
                                <p>Về dịch vụ của bạn.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer footer-style-2">
            <div class="footer-top">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="footer-about">
                                <div class="footer-logo">
                                    <a href="index.html" class="logo logo-dark">
                                        <img src="/assets/images/logo/logo.png" alt="Site Logo">
                                    </a>
                                    <a href="index.html" class="logo logo-light">
                                        <img src="/assets/images/logo/logo-light.png" alt="Site Logo">
                                    </a>
                                </div>
                                <p>Về dịch vụ của bạn.</p>
                                <div class="footer-social">
                                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#"><i class="fab fa-twitter"></i></a>
                                    <a href="#"><i class="fab fa-instagram"></i></a>
                                    <a href="#"><i class="fab fa-youtube"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget">
                                <h5 class="footer-title">Liên hệ</h5>
                                <ul class="footer-contact">
                                    <li><i class="fas fa-map-marker-alt"></i> Địa chỉ</li>
                                    <li><i class="fas fa-phone"></i> <a href="tel:123456789">123-456-789</a></li>
                                    <li><i class="fas fa-envelope"></i> <a href="mailto:info@company.com">info@company.com</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget">
                                <h5 class="footer-title">Thông tin</h5>
                                <ul class="footer-menu">
                                    <li><a href="#">Trang chủ</a></li>
                                    <li><a href="#">Sản phẩm</a></li>
                                    <li><a href="#">Giới thiệu</a></li>
                                    <li><a href="#">Tin tức</a></li>
                                    <li><a href="#">Liên hệ</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12">
                            <div class="footer-widget">
                                <h5 class="footer-title">Bản tin</h5>
                                <form action="#" method="post">
                                    <input type="email" placeholder="Nhập email của bạn">
                                    <button type="submit">Đăng ký</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-12">
                            <p>&copy; 2024 Your Company. All Rights Reserved.</p>
                        </div>
                        <div class="col-lg-6 col-md-6 col-12">
                            <ul class="footer-menu">
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">Terms of Service</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        @* <script src="/assets/js/vendor/modernizr.min.js"></script>
        <!-- jQuery JS -->
        <script src="/assets/js/vendor/jquery.js"></script>
        <!-- Bootstrap JS -->
        <script src="/assets/js/vendor/popper.min.js"></script>
        <script src="/assets/js/vendor/bootstrap.min.js"></script>
        <script src="/assets/js/vendor/slick.min.js"></script>
        <script src="/assets/js/vendor/js.cookie.js"></script>
        <!-- <script src="assets/js/vendor/jquery.style.switcher.js"></script> -->
        <script src="/assets/js/vendor/jquery-ui.min.js"></script>
        <script src="/assets/js/vendor/jquery.ui.touch-punch.min.js"></script>
        <script src="/assets/js/vendor/jquery.countdown.min.js"></script>
        <script src="/assets/js/vendor/sal.js"></script>
        <script src="/assets/js/vendor/jquery.magnific-popup.min.js"></script>
        <script src="/assets/js/vendor/imagesloaded.pkgd.min.js"></script>
        <script src="/assets/js/vendor/isotope.pkgd.min.js"></script>
        <script src="/assets/js/vendor/counterup.js"></script>
        <script src="/assets/js/vendor/waypoints.min.js"></script> *@

        <!-- Main JS -->
        <script src="/assets/js/main.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Get all quantity buttons
                var qtyButtons = document.querySelectorAll('.qtybtn');

                qtyButtons.forEach(function (btn) {
                    btn.addEventListener('click', function () {
                        // Find the quantity input
                        var qtyInput = this.parentElement.querySelector('input');

                        // Get the current value and convert it to a number
                        var currentValue = parseInt(qtyInput.value, 10);

                        if (this.classList.contains('inc')) {
                            // Increment
                            qtyInput.value = currentValue + 1;
                        } else if (this.classList.contains('dec')) {
                            // Decrement
                            if (currentValue > 1) {
                                qtyInput.value = currentValue - 1;
                            }
                        }
                    });
                });
            });
        </script>
</body>
</html>